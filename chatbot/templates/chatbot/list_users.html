{% extends 'base.html' %}



{% block main %}

<div class="container my-5">
  <div class="container align-items-center d-flex justify-content-between">
    <!-- Button trigger modal -->
    <button
      type="button"
      class="btn btn-secondary"
      style="height: 40px"
      data-bs-toggle="modal"
      data-bs-target="#exampleModal"
    >
      + Adicionar Usuário
    </button>

    <!-- Modal -->
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content p-3">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">
              Novo usuário
            </h1>
          </div>
          <div class="modal-body">
            <form method="POST" action="{% url 'create-user' %}">
              {% csrf_token %}
              <div class="mb-2">
                <label for="exampleInputEmail1" class="form-label"
                  >Usuário</label
                >
                <input
                  type="text"
                  class="form-control"
                  name="username"
                  id="exampleInputEmail1"
                  aria-describedby="emailHelp"
                required/>
              </div>
              <div class="mb-2">
                <label for="exampleInputEmail1" class="form-label"
                  >Administrador</label
                >
                <select class="form-control" name="admin" id="">
                  <option value="0">Não</option>
                  <option value="1">Sim</option>
                </select>
              </div>
              <div class="mb-2">
                <label for="exampleInputEmail1" class="form-label"
                  >Email</label
                >
                <input
                  type="email"
                  class="form-control"
                  name="email"
                  id="exampleInputEmail1"
                  aria-describedby="emailHelp"
                required/>
              </div>
              <div class="mb-5">
                <label for="exampleInputPassword1" class="form-label"
                  >Senha</label
                >
                <input
                  type="password"
                  class="form-control"
                  name="password"
                  id="exampleInputPassword1"
                required/>
              </div>
              <button type="submit" class="btn btn-success">
                Adicionar
              </button>
              <button
                type="reset"
                class="btn btn-danger"
                data-bs-dismiss="modal"
              >
                Cancelar
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <input
      class="form-control my-3 w-25 position-right"
      id="myInput"
      type="text"
      placeholder="Nome do usuário"
    />
  </div>

  <table class="table">
    <thead class="table-dark">
      <tr>
        <th scope="col">Id</th>
        <th scope="col">Nome</th>
        <th scope="col">Email</th>
        <th scope="col">Administrador</th>
        <th scope="col">Status</th>
      </tr>
    </thead>
    <tbody id="myTable">
      {% for user in users %}
      <tr>
        <th scope="row">{{user.id}}</th>
        <td>{{user.username}}</td>
        <td>{{user.email}}</td>
        <td>{% if user.is_superuser %} Sim {% else %} Não {% endif %}</td>
        <td>
          {% if user.is_active %}
          <div class="badge badge-pill badge-success p-2">Habilitado</div>
          {% else %}
          <div class="badge badge-pill badge-danger p-2">Desabilitado</div>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  $(document).ready(function () {
    $("#myInput").on("keyup", function () {
      var value = $(this).val().toLowerCase();
      $("#myTable tr").filter(function () {
        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
      });
    });
  });
</script>

{% endblock %}